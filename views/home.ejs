<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Home</title>
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link rel="stylesheet"
		href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>
<style>
	* {
		padding: 0;
		margin: 0;
		overflow-x: hidden;
	}

	body {
		background-color: #0B141A;
		width: 100vw;
	}

	nav {
		width: 100vw;
		height: 12vh;
		background-color: #202C33;
		color: white;
		font-size: 22px;
		display: flex;
		align-items: center;
		padding-left: 25px;
		position: fixed;
	}

	input {
		font-size: 22px;
		background-color: #2A3942;
		outline: none;
		border: none;
		border-radius: 10px;
		padding: 4px;
	}

	.input-form {
		position: fixed;
		bottom: 0px;
		padding: 10px;
		width: 100vw;
		background-color: #202C33;
		color: white;
	}

	.msgs {
		margin-top: 40px;
		overflow-y: scroll;
		padding: 80px 20px;
	}

	.input-name {
		width: 20vw;
	}

	.input-msg {
		width: 72vw;
	}

	.msg-div {
		display: inline-block;
		background-color: #005C4B;
		margin: 5px;
		padding: 5px;
		border-radius: 10px;
		color: white;
	}

	.msg-div>h1 {
		font-size: 18px;
	}

	i {
		background-color: #202C33;
		color: #7C8B95;
		padding: 4px;
		margin: 0;
	}

	button {
		background-color: #202C33;
		border: none;
	}
</style>

<body>
	<nav>
		<h1>WriteX</h1>
	</nav>
	<div class="msgs">
		<% if (locals.messages) { %>
			<% messages.forEach(msg=> { %>
				<div class="msg-div">
					<h1>
						<%=msg.user%>
							<% function formatTimeString(dateString) { const date=new Date(dateString); const
								hours=date.getHours().toString().padStart(2, '0' ); const
								minutes=date.getMinutes().toString().padStart(2, '0' ); const
								formattedTime=`${hours}:${minutes}`; return formattedTime; } %>
								<%=formatTimeString(msg.added.dateadded)%>
					</h1>
					<p>
						<%=msg.text%>
					</p>
				</div>
				<br>
				<% }) %>
					<% } %>
	</div>
	<form class="input-form" method="post" action="/send">
		<input class="input-name" type="text" name="user" id="name" placeholder="Username">
		<input class="input-msg" type="text" name="text" id="msg" placeholder="messages">
		<button type="submit"><i class="material-icons">&#xe163;</i></button>
	</form>
	<script>
		function scrollToBottom() {
			// For cross-browser compatibility
			var body = document.body;
			var html = document.documentElement;

			// Get the height of the entire document
			var height = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);

			// Scroll to the bottom of the page
			window.scrollTo({
				top: height,
				behavior: 'smooth' // Use 'auto' for instant scrolling without animation
			});
		}

		// Call the function to scroll to the end when the page loads
		window.onload = scrollToBottom;
	</script>
</body>

</html>
